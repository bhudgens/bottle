description "Handles the execution of tasks enqueued in the bottle task queue"

start on startup
setuid ubuntu
respawn

env BARE_LOG=true

script
  set +e # really want things to continue, as forgetting this is about the 
         # most common error I see with upstart

  # route_messages actually does a long poll for messages, so though we're gonna
  # respawn with no wait, we should be waiting based on the internals of
  # route_messages
  exec bash -l -c '~/bottle/bin/work_task_queue 2>&1 | logger -t bottle-task-queue'
end script
